<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Azuka â€“ Sms</title><link>https://azuka.github.io/tags/sms/</link><description>Recent content in Sms on Azuka</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 23 May 2021 08:38:40 -0700</lastBuildDate><atom:link href="https://azuka.github.io/tags/sms/index.xml" rel="self" type="application/rss+xml"/><item><title>A billing problem based on assumptions</title><link>https://azuka.github.io/posts/post-0003-a-billing-problem/</link><pubDate>Sun, 23 May 2021 08:38:40 -0700</pubDate><guid>https://azuka.github.io/posts/post-0003-a-billing-problem/</guid><description>
&lt;p&gt;My partner and I started &lt;a href="https://www.singlesend.com"target="_blank" rel="noopener"&gt;SingleSend&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/&gt;
&lt;/svg&gt;&lt;/a&gt; a little over a year ago.&lt;/p&gt;
&lt;p&gt;Everything we knew about SMS messages was that we had a 160-character limit, so dividing the number of characters in
a message by 160 and rounding up would tell us how many messages to bill for. That held true until we got a $750 bill from
Twilio last month which didn&amp;rsquo;t quite match the sending statistics we saw.&lt;/p&gt;
&lt;p&gt;My first thought was malicious actors: I immediately rotated our credentials before taking a look at the logs from Twilio which fortunately, are
quite exhaustive. We found no rogue phone numbers in use, and could trace the SMS IDs back to individual campaign message details in our database.&lt;/p&gt;
&lt;p&gt;Our Twilio bill did mention something called &amp;ldquo;segments&amp;rdquo; which led us to &lt;a href="https://www.twilio.com/blog/2017/03/what-the-heck-is-a-segment.html"target="_blank" rel="noopener"&gt;Twilio&amp;rsquo;s good post on the subject&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/&gt;
&lt;/svg&gt;&lt;/a&gt;. The short summary is: most SMS messages use an encoding format called &lt;a href="https://en.wikipedia.org/wiki/GSM_03.38#GSM_7-bit_default_alphabet_and_extension_table_of_3GPP_TS_23.038_/_GSM_03.38"target="_blank" rel="noopener"&gt;GSM-7&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/&gt;
&lt;/svg&gt;&lt;/a&gt; for which the 160 characters per message rule &lt;em&gt;mostly&lt;/em&gt; holds true: however, once you introduce certain special characters, including emojis, the encoding switches to &lt;a href="https://en.wikipedia.org/wiki/Universal_Coded_Character_Set"target="_blank" rel="noopener"&gt;UCS-2&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/&gt;
&lt;/svg&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Twilio has a very convenient &lt;a href="https://twiliodeved.github.io/message-segment-calculator/"target="_blank" rel="noopener"&gt;segment calculator&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/&gt;
&lt;/svg&gt;&lt;/a&gt; that helped troubleshoot.&lt;/p&gt;
&lt;p&gt;Here are two sample SMS messages:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Hello, this is a very simple message that should fit into exactly one text. Adding a real :) somehow triples the number of segments, which isn't fun to find out&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Hello, this is a very simple message that should fit into exactly one text. Adding ðŸ˜­ triples the number of segments: finding that out on your bill is quite fun.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Both have 160 characters, but the second one contains 3 segments while the first has only 1. When you translate that to a 5000-member campaign, the losses weren&amp;rsquo;t pretty. That was a slightly expensive lesson to learn, but it&amp;rsquo;s interesting how assumptions like this don&amp;rsquo;t get noticed until you put in a multiplying factor.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ll hopefully tell a story about cloud network transfer costs sometime.&lt;/p&gt;</description></item></channel></rss>